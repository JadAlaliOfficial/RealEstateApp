import{r as l,j as t}from"./app-DqMOGD98.js";import{B as u}from"./button-CnCxC_fs.js";import{a as I}from"./card-CSHkU0E3.js";import{I as m}from"./input-CHeP_7PN.js";import{S as L}from"./search-DmG9ZvIp.js";import{X as B}from"./x-yklQ_FSb.js";import"./app-Dca6SbuN.js";import"./index-BywuZfe1.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-YTrgT1D8.js";function G({cities:v,properties:g,units:b,initialFilters:c,onSearch:y,onClear:w,hasActiveFilters:j}){const[r,p]=l.useState(c);l.useEffect(()=>{p(c)},[c]);const[C,n]=l.useState(!1),[N,a]=l.useState(!1),[S,d]=l.useState(!1),F=l.useRef(null),_=l.useRef(null),z=l.useRef(null),f=v.map(e=>e.city).filter((e,s,i)=>i.indexOf(e)===s).filter(e=>e.toLowerCase().includes(r.city.toLowerCase())),h=g.map(e=>e.property_name).filter((e,s,i)=>i.indexOf(e)===s).filter(e=>e.toLowerCase().includes(r.property.toLowerCase())),x=Array.from(new Set(b.map(e=>e.unit_name))).filter(e=>e.toLowerCase().includes(r.unit.toLowerCase())),o=(e,s)=>{p(i=>({...i,[e]:s}))},D=e=>{e.preventDefault();const{city:s,property:i,unit:R,is_hidden:k}=r;y({city:s,property:i,unit:R,is_hidden:k})};return t.jsx(I,{children:t.jsx("form",{onSubmit:D,children:t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx(m,{ref:F,type:"text",placeholder:"Filter by city...",value:r.city,onChange:e=>{const s=e.target.value;o("city",s),n(!0)},onFocus:()=>n(!0),onBlur:()=>setTimeout(()=>n(!1),200),className:"text-input-foreground bg-input"}),C&&f.length>0&&t.jsx("div",{className:"absolute top-full right-0 left-0 z-50 mb-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:f.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{o("city",e),n(!1)},children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(m,{ref:_,type:"text",placeholder:"Filter by property...",value:r.property,onChange:e=>{const s=e.target.value;o("property",s),a(!0)},onFocus:()=>a(!0),onBlur:()=>setTimeout(()=>a(!1),200),className:"text-input-foreground bg-input"}),N&&h.length>0&&t.jsx("div",{className:"absolute top-full right-0 left-0 z-50 mb-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:h.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{o("property",e),a(!1)},children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(m,{ref:z,type:"text",placeholder:"Filter by unit...",value:r.unit,onChange:e=>{const s=e.target.value;o("unit",s),d(!0)},onFocus:()=>d(!0),onBlur:()=>setTimeout(()=>d(!1),200),className:"text-input-foreground bg-input"}),S&&x.length>0&&t.jsx("div",{className:"absolute top-full right-0 left-0 z-50 mb-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:x.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{o("unit",e),d(!1)},children:e},e))})]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"w-full flex items-center rounded-md border border-input bg-input p-1 h-10",children:[t.jsx(u,{type:"button",variant:r.is_hidden?"outline":"default",size:"sm",className:"flex-1 h-8",onClick:()=>o("is_hidden",!1),children:"Visible"}),t.jsx(u,{type:"button",variant:r.is_hidden?"default":"outline",size:"sm",className:"flex-1 h-8",onClick:()=>o("is_hidden",!0),children:"Hidden"})]})}),t.jsx("div",{className:"flex gap-2",children:t.jsx(u,{type:"submit",size:"sm",className:"w-full lg:w-auto",children:t.jsx(L,{className:"h-4 w-4"})})}),t.jsx("div",{className:"flex justify-end lg:justify-start",children:t.jsxs(u,{type:"button",variant:"outline",onClick:()=>{p({city:"",property:"",unit:"",is_hidden:!1}),n(!1),a(!1),d(!1),w()},size:"sm",className:"flex items-center w-full lg:w-auto",disabled:!j,children:[t.jsx(B,{className:"mr-2 h-4 w-4"}),"Clear"]})})]})})})}export{G as default};
