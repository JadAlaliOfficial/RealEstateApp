import{r as n,u as G,j as r}from"./app-D539PDEN.js";import{B as j}from"./button--IN0CSyb.js";import{D as J,a as K,b as Q}from"./drawer-BOU8hUx7.js";import{CitySelectionSection as W}from"./CitySelectionSection-CJJYVcs_.js";import{PropertySelectionSection as X}from"./PropertySelectionSection-Ck1wNY_Z.js";import{UnitSelectionSection as Z}from"./UnitSelectionSection-Bz1ETaPo.js";import{PersonalInformationSection as $}from"./PersonalInformationSection-DpBsGyBe.js";import{ContactInformationSection as ee}from"./ContactInformationSection-QsOD1w1Q.js";import{PaymentAndPreferencesSection as te}from"./PaymentAndPreferencesSection-CUYUOw45.js";import{AssistanceSection as ae}from"./AssistanceSection-SJlB0IXz.js";import"./app-DvnMLx2o.js";import"./index-CituRSkQ.js";import"./utils-CBfrqCZ4.js";import"./index-MQL96Sqq.js";import"./index-BA2VIff1.js";import"./index-D9RoX9VL.js";import"./index-Coh7aVBC.js";import"./index-DECShoH4.js";import"./index-u_jnU6es.js";import"./x-DO94m97V.js";import"./createLucideIcon-4b2xxMBa.js";import"./label-D-ManEYT.js";import"./popover-uWV6s5Ev.js";import"./index-BtSfnK06.js";import"./command-CjlHw1Dl.js";import"./search-Dil3k9X7.js";import"./chevrons-up-down-28SbtDvw.js";import"./check-tZNcpeuV.js";import"./FormField-CaNd-mdr.js";import"./input-DQBwF3pd.js";import"./RadioGroupField-BDqJH2nq.js";import"./radioGroup-Cwca0D5V.js";import"./index-BWOOmq3Y.js";import"./index-DnE1pg1s.js";function Te({cities:A,properties:P,unitsByProperty:d,open:k,onOpenChange:g,onSuccess:V,currentFilters:m,page:w,perPage:R}){const l=n.useRef(null),u=n.useRef(null),h=n.useRef(null),f=n.useRef(null),[D,c]=n.useState(""),[I,o]=n.useState(""),[U,C]=n.useState(""),[L,b]=n.useState(""),[T,_]=n.useState([]),[F,E]=n.useState([]),[p,v]=n.useState(""),{data:t,setData:a,post:H,processing:x,errors:s,reset:z,transform:M}=G({unit_id:"",first_name:"",last_name:"",street_address_line:"",login_email:"",alternate_email:"",mobile:"",emergency_phone:"",cash_or_check:"",has_insurance:"",sensitive_communication:"",has_assistance:"",assistance_amount:"",assistance_company:"",city_id:""}),S=()=>{z(),c(""),o(""),C(""),b(""),_([]),E([]),v("")},O=e=>{if(a("city_id",e),a("unit_id",""),v(""),c(""),o(""),e){const i=P.filter(y=>y.city_id?.toString()===e);E(i)}else E([]);_([])},Y=e=>{v(e),a("unit_id",""),c(""),o(""),e&&d&&d[e]?_(d[e]):_([])},q=e=>{a("unit_id",e),o("")},N=e=>{e.preventDefault(),c(""),o(""),C(""),b("");let i=!1;(!p||p.trim()==="")&&(c("Please select a property before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.unit_id||t.unit_id.trim()==="")&&(o("Please select a unit before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.first_name||t.first_name.trim()==="")&&(C("Please enter a first name before submitting the form."),h.current&&(h.current.focus(),h.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.last_name||t.last_name.trim()==="")&&(b("Please enter a last name before submitting the form."),f.current&&(f.current.focus(),f.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),!i&&(M(y=>({...y,search:m?.search??"",city:m?.city??"",property:m?.property??"",unit_name:m?.unitName??"",perPage:R??15,page:w??1})),H(route("tenants.store"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{S(),g(!1),V?.()}}))},B=()=>{S(),g(!1)};return r.jsx(J,{open:k,onOpenChange:g,modal:!1,children:r.jsx(K,{size:"half",title:"Create New Tenant",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsx(W,{cities:A,value:t.city_id,onChange:O,error:s.city_id}),r.jsx(X,{ref:l,properties:F,value:p,onChange:Y,disabled:!t.city_id,validationError:D}),r.jsx(Z,{ref:u,units:T,value:t.unit_id,onChange:q,disabled:!p,error:s.unit_id,validationError:I}),r.jsx($,{firstNameRef:h,lastNameRef:f,firstName:t.first_name,lastName:t.last_name,streetAddress:t.street_address_line,onFirstNameChange:e=>a("first_name",e),onLastNameChange:e=>a("last_name",e),onStreetAddressChange:e=>a("street_address_line",e),firstNameError:s.first_name,lastNameError:s.last_name,streetAddressError:s.street_address_line,firstNameValidationError:U,lastNameValidationError:L}),r.jsx(ee,{loginEmail:t.login_email,alternateEmail:t.alternate_email,mobile:t.mobile,emergencyPhone:t.emergency_phone,onLoginEmailChange:e=>a("login_email",e),onAlternateEmailChange:e=>a("alternate_email",e),onMobileChange:e=>a("mobile",e),onEmergencyPhoneChange:e=>a("emergency_phone",e),loginEmailError:s.login_email,alternateEmailError:s.alternate_email,mobileError:s.mobile,emergencyPhoneError:s.emergency_phone}),r.jsx(te,{cashOrCheck:t.cash_or_check,hasInsurance:t.has_insurance,sensitiveCommunication:t.sensitive_communication,hasAssistance:t.has_assistance,onCashOrCheckChange:e=>a("cash_or_check",e),onHasInsuranceChange:e=>a("has_insurance",e),onSensitiveCommunicationChange:e=>a("sensitive_communication",e),onHasAssistanceChange:e=>a("has_assistance",e),cashOrCheckError:s.cash_or_check,hasInsuranceError:s.has_insurance,sensitiveCommunicationError:s.sensitive_communication,hasAssistanceError:s.has_assistance}),t.has_assistance==="Yes"&&r.jsx(ae,{assistanceAmount:t.assistance_amount,assistanceCompany:t.assistance_company,onAssistanceAmountChange:e=>a("assistance_amount",e),onAssistanceCompanyChange:e=>a("assistance_company",e),assistanceAmountError:s.assistance_amount,assistanceCompanyError:s.assistance_company})]})}),r.jsx(Q,{children:r.jsxs("div",{className:"flex gap-2 w-full",children:[r.jsx(j,{type:"button",variant:"outline",onClick:B,className:"flex-1",children:"Cancel"}),r.jsx(j,{type:"submit",onClick:N,disabled:x,className:"flex-1",children:x?"Creating...":"Create Tenant"})]})})]})})})}export{Te as default};
