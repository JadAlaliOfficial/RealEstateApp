import{j as e,a as u}from"./app-DqMOGD98.js";import{C as y,b as w}from"./card-CSHkU0E3.js";import{T,a as _,b as C,c as o,d as S}from"./table-DhaitHv5.js";import{u as k}from"./usePermissions-D3YX7w9A.js";import z from"./PaymentPlanTableRow-DR5Isvj6.js";import{B as x}from"./button-CnCxC_fs.js";import"./app-Dca6SbuN.js";import"./utils-CBfrqCZ4.js";import"./formatDate-CHPAyz9M.js";import"./format-DUNHsrA7.js";import"./StatusBadge-Bb0M5w5w.js";import"./badge-CdyTx-24.js";import"./index-BywuZfe1.js";import"./index-CdJFUDDL.js";import"./eye-Hz_BelNN.js";import"./createLucideIcon-YTrgT1D8.js";import"./square-pen-DyjCcft1.js";import"./eye-off-TKSRjyRo.js";import"./trash-2-D82ivj7i.js";function W({paymentPlans:r,filters:d,perPage:a,search:b,onEdit:p,onDelete:g}){const{hasAnyPermission:h}=k(),s=r.current_page??r?.meta?.current_page??1,l=r.last_page??r?.meta?.last_page??1,j=r.total??r?.meta?.total??r.data.length,f=r.from??r?.meta?.from??0,N=r.to??r?.meta?.to??r.data.length,i=(()=>{if(String(a).toLowerCase()==="all")return"all";const t=typeof a=="number"?a:parseInt(String(a),10);if(!Number.isNaN(t)&&t>0)return String(t);const n=r?.per_page??r?.meta?.per_page??15;return String(n)})(),m=d?.is_hidden?"true":void 0,v=t=>{const n=t==="all"?"all":parseInt(t,10);u.get(route("payment-plans.index"),{city:d?.city||void 0,property:d?.property||void 0,unit:d?.unit||void 0,tenant:d?.tenant||void 0,is_hidden:m,per_page:n,page:1},{preserveState:!0,preserveScroll:!0})},c=t=>{t<1||t>l||u.get(route("payment-plans.index"),{city:d?.city||void 0,property:d?.property||void 0,unit:d?.unit||void 0,tenant:d?.tenant||void 0,is_hidden:m,page:t,per_page:i},{preserveState:!0,preserveScroll:!0})};return e.jsx(y,{className:"bg-card text-card-foreground shadow-lg",children:e.jsxs(w,{children:[e.jsx("div",{className:"relative overflow-x-auto",children:e.jsxs(T,{className:"border-collapse rounded-md border border-border",children:[e.jsx(_,{children:e.jsxs(C,{className:"border-border",children:[e.jsx(o,{className:"sticky left-0 z-10 min-w-[120px] border border-border bg-muted text-muted-foreground",children:"City"}),e.jsx(o,{className:"sticky left-[120px] z-10 min-w-[150px] border border-border bg-muted text-muted-foreground",children:"Property"}),e.jsx(o,{className:"sticky left-[270px] z-10 min-w-[120px] border border-border bg-muted text-muted-foreground",children:"Unit"}),e.jsx(o,{className:"sticky left-[390px] z-10 min-w-[150px] border border-border bg-muted text-muted-foreground",children:"Tenant"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground text-right",children:"Amount"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground text-right",children:"Paid"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground text-right",children:"Left to Pay"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Status"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Date"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Note"}),h(["payment-plans.show","payment-plans.edit","payment-plans.update","payment-plans.destroy"])&&e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Actions"})]})}),e.jsx(S,{children:r.data.map(t=>e.jsx(z,{plan:t,filters:d,perPage:i,currentPage:s,search:b,onEdit:p,onDelete:g},t.id))})]})}),r.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No payment plans found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",f??0,"-",N??r.data.length," of ",j]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Rows per page:"}),e.jsxs("select",{className:"rounded-md border border-border bg-background p-1 text-sm",value:i,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"30",children:"30"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c(s-1),disabled:s<=1,children:"Previous"}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c(s+1),disabled:s>=l,children:"Next"})]})]})]})]})})}export{W as default};
