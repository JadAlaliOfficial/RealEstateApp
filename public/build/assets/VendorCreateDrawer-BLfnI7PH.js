import{r as d,u as A,j as r}from"./app-D539PDEN.js";import{B as E}from"./button--IN0CSyb.js";import{D as I,a as L,b as Q}from"./drawer-BOU8hUx7.js";import U from"./CityField-B9wdGqpc.js";import W from"./VendorNameField-C7Jft4Oj.js";import $ from"./PhoneNumberField-Bb7xxE7T.js";import G from"./EmailField-BibLrg_Z.js";import H from"./ServiceTypeField-CWD1g_Xj.js";import"./app-DvnMLx2o.js";import"./index-CituRSkQ.js";import"./utils-CBfrqCZ4.js";import"./index-MQL96Sqq.js";import"./index-BA2VIff1.js";import"./index-D9RoX9VL.js";import"./index-Coh7aVBC.js";import"./index-DECShoH4.js";import"./index-u_jnU6es.js";import"./x-DO94m97V.js";import"./createLucideIcon-4b2xxMBa.js";import"./label-D-ManEYT.js";import"./popover-uWV6s5Ev.js";import"./index-BtSfnK06.js";import"./command-CjlHw1Dl.js";import"./search-Dil3k9X7.js";import"./input-DQBwF3pd.js";import"./plus-f0NO2h0u.js";import"./trash-2-B94tWSse.js";import"./select-BG1YkFMq.js";import"./index-Dc_FVRD7.js";import"./index-BWOOmq3Y.js";import"./index-CvrhNEbR.js";import"./index-DnE1pg1s.js";import"./chevron-down-B9OnTpGY.js";import"./check-tZNcpeuV.js";import"./chevron-up-BJSubxpl.js";function Ne({cities:g,open:w,onOpenChange:h,onSuccess:S}){const u=d.useRef(null),p=d.useRef(null),[V,n]=d.useState(""),[N,a]=d.useState(""),[,v]=d.useState(""),{data:t,setData:s,post:F,processing:x,errors:i,reset:C,transform:D}=A({city_id:"",vendor_name:"",number:[],email:[],service_type:[]}),y=e=>{if(i[e])return i[e];const o=Object.keys(i).find(m=>m.startsWith(`${e}.`));if(o)return i[o]},R=e=>{s("city_id",e);const o=g.find(m=>m.id.toString()===e);v(o?o.city:""),n("")},k=e=>{s("vendor_name",e.target.value),a("")},P=e=>{s("number",e)},B=e=>{s("email",e)},T=e=>{s("service_type",e)},j=e=>{e.preventDefault(),n(""),a("");let o=!1;if((!t.city_id||t.city_id.trim()==="")&&(n("Please select a city before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.vendor_name||t.vendor_name.trim()==="")&&(a("Please enter a vendor name before submitting the form."),p.current&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),o)return;const m=()=>{try{const _=new URLSearchParams(window.location.search),f=["city","city_id","vendor_name","number","email","per_page","page"],l={};return f.forEach(b=>{const c=_.get(b);c!==null&&(l[b]=c)}),l}catch{return{}}};D(_=>{const f=m(),l={};return[["city","filter_city"],["city_id","filter_city_id"],["vendor_name","filter_vendor_name"],["number","filter_number"],["email","filter_email"],["per_page","filter_per_page"],["page","filter_page"]].forEach(([c,z])=>{f[c]!==void 0&&(l[z]=f[c])}),{..._,...l}}),F(route("vendors.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C(),v(""),n(""),a(""),h(!1),S?.()}})},q=()=>{C(),v(""),n(""),a(""),h(!1)};return r.jsx(I,{open:w,onOpenChange:h,modal:!1,children:r.jsx(L,{size:"half",title:"Create New Vendor",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsx(U,{cities:g,value:t.city_id,onChange:R,error:i.city_id,validationError:V,ref:u}),r.jsx(W,{value:t.vendor_name,onChange:k,error:i.vendor_name,validationError:N,ref:p}),r.jsx($,{value:t.number,onChange:P,error:y("number")}),r.jsx(G,{value:t.email,onChange:B,error:y("email")}),r.jsx(H,{value:t.service_type,onChange:T,error:y("service_type")})]})}),r.jsxs(Q,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(E,{type:"button",variant:"outline",onClick:q,children:"Cancel"}),r.jsx(E,{type:"submit",onClick:j,disabled:x,children:x?"Creating...":"Create Vendor"})]})]})})})}export{Ne as default};
