import{r as o,j as t}from"./app-DqMOGD98.js";import{B as d}from"./button-CnCxC_fs.js";import{I as l}from"./input-CHeP_7PN.js";import{C as w}from"./chevron-down-CVFkLqo9.js";import{S as O}from"./search-DmG9ZvIp.js";import{X as A}from"./x-yklQ_FSb.js";import"./app-Dca6SbuN.js";import"./index-BywuZfe1.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-YTrgT1D8.js";function Z({cities:C,properties:N,units:_,onSearch:S,onClear:R,initialFilters:n}){const[a,u]=o.useState({city:"",property:"",unit:"",name:"",applicant_applied_from:"",is_hidden:!1});o.useEffect(()=>{n&&u({city:n.city||"",property:n.property||"",unit:n.unit||"",name:n.name||"",applicant_applied_from:n.applicant_applied_from||"",is_hidden:!!n.is_hidden||!1})},[n]);const[D,i]=o.useState(!1),[k,c]=o.useState(!1),[L,p]=o.useState(!1),m=o.useRef(null),f=o.useRef(null),h=o.useRef(null),x=o.useRef(null),g=o.useRef(null),v=o.useRef(null);o.useEffect(()=>{const e=r=>{m.current&&!m.current.contains(r.target)&&x.current&&!x.current.contains(r.target)&&i(!1),f.current&&!f.current.contains(r.target)&&g.current&&!g.current.contains(r.target)&&c(!1),h.current&&!h.current.contains(r.target)&&v.current&&!v.current.contains(r.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const s=(e,r)=>{u(B=>({...B,[e]:r}))},P=e=>{s("city",e.name),i(!1)},U=e=>{s("property",e.name),c(!1)},z=e=>{s("unit",e.name),p(!1)},E=()=>{S(a)},I=()=>{u({city:"",property:"",unit:"",name:"",applicant_applied_from:"",is_hidden:!1}),R()},y=Object.values(N).flat().filter(e=>e.name.toLowerCase().includes(a.property.toLowerCase())),b=Object.values(_).flat().filter(e=>e.name.toLowerCase().includes(a.unit.toLowerCase())),j=C.filter(e=>e.name.toLowerCase().includes(a.city.toLowerCase()));return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx(l,{ref:x,type:"text",placeholder:"City",value:a.city,onChange:e=>{const r=e.target.value;s("city",r),i(r.length>0)},onFocus:()=>i(!0),className:"bg-input pr-8 text-input-foreground"}),t.jsx(w,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),D&&j.length>0&&t.jsx("div",{ref:m,className:"absolute left-0 right-0 top-full z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:j.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>P(e),children:e.name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(l,{ref:g,type:"text",placeholder:"Property",value:a.property,onChange:e=>{const r=e.target.value;s("property",r),c(r.length>0)},onFocus:()=>c(!0),className:"bg-input pr-8 text-input-foreground"}),t.jsx(w,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),k&&y.length>0&&t.jsx("div",{ref:f,className:"absolute left-0 right-0 top-full z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:y.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>U(e),children:e.name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(l,{ref:v,type:"text",placeholder:"Unit",value:a.unit,onChange:e=>{const r=e.target.value;s("unit",r),p(r.length>0)},onFocus:()=>p(!0),className:"bg-input pr-8 text-input-foreground"}),t.jsx(w,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),L&&b.length>0&&t.jsx("div",{ref:h,className:"absolute left-0 right-0 top-full z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:b.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>z(e),children:e.name},e.id))})]}),t.jsx(l,{type:"text",placeholder:"Application Name",value:a.name,onChange:e=>s("name",e.target.value),className:"bg-input text-input-foreground"}),t.jsx(l,{type:"text",placeholder:"Applied From",value:a.applicant_applied_from,onChange:e=>s("applicant_applied_from",e.target.value),className:"bg-input text-input-foreground"}),t.jsxs("div",{className:"flex h-10 items-center rounded-md border border-input bg-input p-1",children:[t.jsx(d,{type:"button",variant:a.is_hidden?"outline":"default",size:"sm",className:"h-8 flex-1",onClick:()=>s("is_hidden",!1),children:"Visible"}),t.jsx(d,{type:"button",variant:a.is_hidden?"default":"outline",size:"sm",className:"h-8 flex-1",onClick:()=>s("is_hidden",!0),children:"Hidden"})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[t.jsxs(d,{onClick:E,variant:"default",className:"sm:flex-1",children:[t.jsx(O,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(d,{onClick:I,variant:"outline",size:"sm",className:"whitespace-nowrap sm:w-auto",children:[t.jsx(A,{className:"mr-2 h-4 w-4"}),"Clear"]})]})]})}export{Z as default};
