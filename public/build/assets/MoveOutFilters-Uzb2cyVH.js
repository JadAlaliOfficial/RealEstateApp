import{r as s,j as t}from"./app-DqMOGD98.js";import{B as d}from"./button-CnCxC_fs.js";import{I as y}from"./input-CHeP_7PN.js";import{C as v}from"./chevron-down-CVFkLqo9.js";import{S as H}from"./search-DmG9ZvIp.js";import{X as M}from"./x-yklQ_FSb.js";import"./app-Dca6SbuN.js";import"./index-BywuZfe1.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-YTrgT1D8.js";function $({cities:j,properties:N,allUnits:S,onSearch:R,onClear:_,initialFilters:n}){const[o,l]=s.useState({city:"",property:"",unit:"",is_hidden:!1}),[D,i]=s.useState(!1),[k,c]=s.useState(!1),[I,u]=s.useState(!1),p=s.useRef(null),h=s.useRef(null),f=s.useRef(null),m=s.useRef(null),x=s.useRef(null),g=s.useRef(null);s.useEffect(()=>{n&&l({city:n.city??"",property:n.property??"",unit:n.unit??"",is_hidden:n.is_hidden??!1});const e=r=>{p.current&&!p.current.contains(r.target)&&m.current&&!m.current.contains(r.target)&&i(!1),h.current&&!h.current.contains(r.target)&&x.current&&!x.current.contains(r.target)&&c(!1),f.current&&!f.current.contains(r.target)&&g.current&&!g.current.contains(r.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[n]);const a=(e,r)=>{l(T=>({...T,[e]:r}))},L=e=>{a("city",e),i(!1)},P=e=>{const r=e.target.value;a("city",r),i(!0)},U=e=>{const r=e.target.value;a("property",r),c(!0)},z=e=>{a("property",e),c(!1)},E=e=>{const r=e.target.value;a("unit",r),u(!0)},F=e=>{a("unit",e),u(!1)},B=()=>{R({city_id:o.city||null,property_id:o.property||null,unit_id:o.unit||null,is_hidden:o.is_hidden})},O=()=>{l({city:"",property:"",unit:"",is_hidden:!1}),_()},w=j.filter(e=>e.toLowerCase().includes(o.city.toLowerCase())),C=N.filter(e=>e.toLowerCase().includes(o.property.toLowerCase())),b=S.filter(e=>e.toLowerCase().includes(o.unit.toLowerCase()));return t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:[t.jsxs("div",{className:"relative",children:[t.jsx(y,{ref:m,type:"text",placeholder:"City",value:o.city,onChange:P,onFocus:()=>i(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),D&&w.length>0&&t.jsx("div",{ref:p,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:w.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>L(e),children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(y,{ref:x,type:"text",placeholder:"Property",value:o.property,onChange:U,onFocus:()=>c(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),k&&C.length>0&&t.jsx("div",{ref:h,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:C.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>z(e),children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(y,{ref:g,type:"text",placeholder:"Unit",value:o.unit,onChange:E,onFocus:()=>u(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),I&&b.length>0&&t.jsx("div",{ref:f,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:b.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>F(e),children:e},e))})]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"w-full flex items-center rounded-md border border-input bg-input p-1 h-10",children:[t.jsx(d,{type:"button",variant:o.is_hidden?"outline":"default",size:"sm",className:"flex-1 h-8",onClick:()=>l(e=>({...e,is_hidden:!1})),children:"Visible"}),t.jsx(d,{type:"button",variant:o.is_hidden?"default":"outline",size:"sm",className:"flex-1 h-8",onClick:()=>l(e=>({...e,is_hidden:!0})),children:"Hidden"})]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(d,{onClick:B,variant:"default",className:"flex items-center",children:[t.jsx(H,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(d,{onClick:O,variant:"outline",className:"flex items-center",children:[t.jsx(M,{className:"mr-2 h-4 w-4"}),"Clear"]})]})]})}export{$ as default};
