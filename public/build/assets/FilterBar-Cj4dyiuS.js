import{r,j as t}from"./app-D539PDEN.js";import{B as g}from"./button--IN0CSyb.js";import{I as x}from"./input-DQBwF3pd.js";import{C as v}from"./chevron-down-B9OnTpGY.js";import{S as Z}from"./search-Dil3k9X7.js";import{X as $}from"./x-DO94m97V.js";import"./app-DvnMLx2o.js";import"./index-CituRSkQ.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-4b2xxMBa.js";const ee=[{value:"exclude_completed",label:"Exclude Completed"},{value:"all",label:"Show All"},{value:"Completed",label:"Completed"},{value:"In Progress",label:"In Progress"},{value:"Pending",label:"Pending"}];function ce({filters:n,cities:d,properties:T,units:B,vendors:O,onSearch:A,onClear:H}){const[w,b]=r.useState({...n,is_hidden:String(n.is_hidden).toLowerCase()==="true"||n.is_hidden===!0}),[c,p]=r.useState(n.city||""),[X,a]=r.useState(!1),[D,L]=r.useState([]),y=r.useRef(null),C=r.useRef(null),[k,m]=r.useState(n.property||""),[q,l]=r.useState(!1),_=r.useRef(null),j=r.useRef(null),[P,h]=r.useState(n.unit_name||""),[G,u]=r.useState(!1),N=r.useRef(null),S=r.useRef(null),[E,f]=r.useState(n.vendor_name||""),[J,i]=r.useState(!1),I=r.useRef(null),R=r.useRef(null),[K,F]=r.useState(n.status||"exclude_completed");r.useEffect(()=>{b({...n,is_hidden:String(n.is_hidden).toLowerCase()==="true"||n.is_hidden===!0}),p(n.city||""),m(n.property||""),h(n.unit_name||""),f(n.vendor_name||""),F(n.status||"exclude_completed")},[n]),r.useEffect(()=>{if(d)if(c.trim()==="")L(d);else{const e=d.filter(o=>o.city.toLowerCase().includes(c.toLowerCase()));L(e)}},[c,d]);const z=T?.filter(e=>e.property_name.toLowerCase().includes(k.toLowerCase()))||[],U=O?.filter(e=>e.vendor_name.toLowerCase().includes(E.toLowerCase()))||[],V=B?.filter(e=>e.unit_name.toLowerCase().includes(P.toLowerCase()))||[];r.useEffect(()=>{const e=o=>{C.current&&!C.current.contains(o.target)&&y.current&&!y.current.contains(o.target)&&a(!1),j.current&&!j.current.contains(o.target)&&_.current&&!_.current.contains(o.target)&&l(!1),S.current&&!S.current.contains(o.target)&&N.current&&!N.current.contains(o.target)&&u(!1),R.current&&!R.current.contains(o.target)&&I.current&&!I.current.contains(o.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const s=(e,o)=>{b(Y=>({...Y,[e]:o}))},M=e=>{p(e),s("city",e),a(!1)},Q=()=>{const e={...w};e.is_hidden?e.is_hidden="true":delete e.is_hidden,A(e)},W=()=>{b({status:"exclude_completed",is_hidden:!1}),p(""),m(""),h(""),f(""),F("exclude_completed"),a(!1),l(!1),u(!1),i(!1),H()};return t.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-8",children:[t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:y,type:"text",placeholder:"Filter by City",value:c,onChange:e=>{p(e.target.value),s("city",e.target.value),a(!0)},onFocus:()=>a(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),X&&D.length>0&&t.jsx("div",{ref:C,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:D.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>M(e.city),children:e.city},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:_,type:"text",placeholder:"Filter by Property",value:k,onChange:e=>{m(e.target.value),s("property",e.target.value),l(e.target.value.length>0)},onFocus:()=>l(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),q&&z.length>0&&t.jsx("div",{ref:j,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:z.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{m(e.property_name),s("property",e.property_name),l(!1)},children:e.property_name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:N,type:"text",placeholder:"Filter by Unit",value:P,onChange:e=>{h(e.target.value),s("unit_name",e.target.value),u(e.target.value.length>0)},onFocus:()=>u(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),G&&V.length>0&&t.jsx("div",{ref:S,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:V.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{h(e.unit_name),s("unit_name",e.unit_name),u(!1)},children:e.unit_name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:I,type:"text",placeholder:"Filter by Vendor",value:E,onChange:e=>{f(e.target.value),s("vendor_name",e.target.value),i(e.target.value.length>0)},onFocus:()=>i(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),J&&U.length>0&&t.jsx("div",{ref:R,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:U.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{f(e.vendor_name),s("vendor_name",e.vendor_name),i(!1)},children:[e.vendor_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))})]}),t.jsx("select",{value:K,onChange:e=>{F(e.target.value),s("status",e.target.value)},className:"rounded-md border border-input bg-input px-3 py-2 text-sm text-input-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:ee.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"w-full flex items-center rounded-md border border-input bg-input p-1 h-10",children:[t.jsx(g,{type:"button",variant:w.is_hidden?"outline":"default",size:"sm",className:"flex-1 h-8",onClick:()=>s("is_hidden",!1),children:"Visible"}),t.jsx(g,{type:"button",variant:w.is_hidden?"default":"outline",size:"sm",className:"flex-1 h-8",onClick:()=>s("is_hidden",!0),children:"Hidden"})]})}),t.jsxs(g,{onClick:Q,variant:"default",className:"flex items-center",children:[t.jsx(Z,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(g,{onClick:W,variant:"outline",className:"flex items-center",children:[t.jsx($,{className:"mr-2 h-4 w-4"}),"Clear"]})]})}export{ce as default};
